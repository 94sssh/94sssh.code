---
title: 모던 자바스크립트 Deep Dive - 09. 타입 변환과 단축 평가
date: '2023-12-30T01:00:00'
tags: ['javascript', 'book', 'deepdive']
draft: false
summary: 모던 자바스크립트 Deep Dive - 09. 타입 변환과 단축 평가
layout: PostSimple
---

## 9.1. 타입 변환이란?

자바스크립트의 모든 값은 타입이 있고, 타입은 다른 타입으로 변할 수 있다. 개발자의 의도대로 타입을 변환하는 것을 **명시적 타입 변환** 또는 **타입 캐스팅**이라 한다. 원시 값은 변경 불가능한 값이므로, 명시적/암묵적 타입 변환이 원시 값을 직접 변경하는 것은 아니고, 새로운 타입의 값을 만들어 한 번 사용하고 버린다.

## 9.2. 암묵적 타입 변환

### 9.2.1. 문자열 타입으로 변환

```js
1 + '2' // '12'
```

문자열 연결 연산자의 피연산자는 문맥상 문자열 타입이어야 한다. 자바스크립트 엔진은 문자열 연결 연산자 표현식을 평가하기 위해 피연사자 중 문자열 타입이 아닌 피연사자는 문자열 타입으로 암묵적 타입 변환한다.

### 9.2.2. 숫자 타입으로 변환

```js
1 * '10' // 10
1 / 'one' // NaN
```

산술 연산자는 문맥상 피연산자가 모두 숫자 타입이어야 하므로 숫자 타입으로 암묵적 타입 변환하며, 숫자 타입으로 변환할 수 없는 경우에는 산술 연산을 수행할 수 없어 평가 결과는 `NaN`이 된다.

```js
'1' > 0 // true
```

비교 연산자는 피연산자의 크기를 비교해야 한다. 문맥상 피연산자의 타입은 숫자 타입이므로, 숫자 타입으로 압묵적 타입 변환한다.

### 9.2.3. 불리언 타입으로 변환

조건식의 평가 결과는 Truthy한 값은 `true`로, Falsy한 값은 `false`로 암묵적 타입 변환한다.
Falsy한 값들은 다음과 같다.

- false
- undefined
- null
- 0, -0
- 0n
- NaN
- ''

## 9.3. 명시적 타입 변환

### 9.3.1. 문자열 타입으로 변환

문자열 타입이 아닌 값을 문자열 타입으로 변환하는 방법은 다음과 같다.

- `String` 생성자 함수
- `.toString()` 메서드
- `+` 문자열 연결 연산자

### 9.3.2. 숫자 타입으로 변환

숫자 타입이 아닌 값을 숫자 타입으로 변환하는 방법은 다음과 같다.

- `Number` 생성자 함수
- `parseInt`, `parseFloat` 함수
- `+` 단항 산술 연산자
- `*` 산술 연산자

### 9.3.3. 불리언 타입으로 변환

불리언 타입이 아닌 값을 불리언 타입으로 리턴하는 방법은 다음과 같다.

- `Boolean` 생성자 함수
- `!!`

## 9.4. 단축 평가

### 9.4.1. 논리 연산자를 사용한 단축 평가

논리합(`||`) 또는 논리곱(`&&`) 연산자 표현식의 평가 결과는 불리언 값이 아닐 수도 있다. 논리합(`||`) 또는 논리곱(`&&`) 연산자 표현식은 언제나 2개의 피연산자 중 하나로 평가된다.

```js
'Cat' && 'Dog' // 'Dog'
```

논리곱(`&&`) 연산자의 경우, 첫 번째 피연산자인 'Cat'이 Truthy한 값이므로 `true`로 평가된다. 그런데 이 때 논리 연산의 결과를 결정하는 것은 두 번째 연산자이다. 두 번째 연산자인 'Dog'이 마찬가지로 truthy한 값이므로 'Dog'을 리턴한다.

논리 연산자는 좌항에서 우항으로 평가가 진행된다. 논리곱(`&&`) 연산자는 논리 연산의 결과를 결정한 우항을 리턴하고, 논리합(`||`) 연산자는 연산의 결과를 결정한 좌항을 리턴한다.

논리 연산의 결과를 결정하는 피연산자를 타입 변환하지 않고 그대로 반환하는 것을 `단축 평가`라 한다. 표현식을 평가하는 도중에 평가 결과가 확정된 경우, 나머지 평가 과정을 생략하는 것이다.

|  단축 평가 표현식   | 평가 결과 |
| :-----------------: | :-------: |
| true \|\| anything  |   true    |
| false \|\| anything | anything  |
|  true && anything   | anything  |
|  false && anything  |   false   |

### 9.4.2. 옵셔널 체이닝 연산자

옵셔널 체이닝 연산자는 `?.`의 좌항의 피연산자가 `null` 또는 `undefined`인 경우, `undefined`를 리턴하고, 그렇지 않으면 우항을 참조한다. `?.`가 도입되기 전에는 `&&`를 사용해 변수가 `null` 또는 `undefined`인지 확인했다. 좌항의 평가 결과가 Falsy한 값이어도, `null` 이나 `undefined`인 경우가 아니라면 우항의 참조를 이어간다.

```js
var elem = null
console.log(elem?.value) // undefined
```

### 9.4.3. null 병합 연산자

null 병합 연산자 `??`는 좌항의 피연산자가 `null` 또는 `undefined`이면 우항의 피연산자를, 그렇지 않으면 좌항의 피연산자를 리턴한다. 좌항의 평가 결과가 Falsy한 값이어도, `null` 이나 `undefined`가 아니라면 좌항을 리턴한다.

```js
var foo = null ?? 'default string'
console.log(foo) // 'default string'
```
